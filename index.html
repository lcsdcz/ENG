<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语对话AI助手 - English Conversation AI Assistant</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-robot me-2"></i>
                英语对话AI助手
            </a>
            <div class="header-controls">
                <button id="essayModeToggle" class="btn btn-outline-success btn-sm me-2" title="作文模式">
                    <i class="fas fa-pen-fancy"></i>
                    <span id="essayModeText">作文模式</span>
                </button>
                <button id="translationToggle" class="btn btn-outline-light btn-sm me-2" title="切换中文翻译">
                    <i class="fas fa-language"></i>
                    <span id="translationText">中文翻译</span>
                </button>
                <button id="helpButton" class="btn btn-outline-light btn-sm me-2" data-bs-toggle="modal" data-bs-target="#helpModal">
                    <i class="fas fa-question-circle"></i>
                    帮助
                </button>
                <button id="statsButton" class="btn btn-outline-light btn-sm me-2" data-bs-toggle="modal" data-bs-target="#statsModal">
                    <i class="fas fa-chart-bar"></i>
                    统计
                </button>
                <div class="search-controls">
                    <i class="fas fa-search"></i>
                    <div class="zoom-controls">
                        <button class="btn btn-link btn-sm p-0" id="increaseFontBtn" title="增大字体" aria-label="增大字体">+</button>
                        <span class="separator">|</span>
                        <button class="btn btn-link btn-sm p-0" id="decreaseFontBtn" title="减小字体" aria-label="减小字体">-</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <div class="container mt-4">
        <!-- 欢迎区域 -->
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="welcome-card text-center mb-4">
                    <h1 class="display-6 text-primary mb-3">
                        <i class="fas fa-star text-warning me-2"></i>
                        欢迎使用英语对话AI助手
                    </h1>
                    <p class="lead text-muted">
                        AI将用英语回复，支持实时流式输出
                    </p>
                    <div class="alert alert-info" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>提示：</strong>支持中英文混合输入，AI只使用英语回复，回复无长度限制
                    </div>
                </div>
            </div>
        </div>

        <!-- 聊天区域 -->
        <div id="chatArea" class="chat-area">
            <div id="chatHistory" class="chat-history">
                <!-- 消息将在这里动态添加 -->
            </div>
        </div>

        <!-- 输入区域 -->
        <div class="chat-input-container">
            <div class="input-group">
                <textarea 
                    id="userInput" 
                    class="form-control" 
                    placeholder="请输入您想聊的话题... (Type your message here...)"
                    rows="3"
                    maxlength="500"
                ></textarea>
                <button 
                    class="btn btn-primary" 
                    type="button" 
                    id="sendButton"
                >
                    <i class="fas fa-paper-plane me-1"></i>
                    发送
                </button>
            </div>
            <div class="input-footer">
                <small class="text-muted">
                    <span id="charCount">0</span>/500 字符
                </small>
                <small class="text-muted ms-3">
                    <i class="fas fa-lightbulb text-warning me-1"></i>
                    建议话题：英语学习、个人发展、兴趣爱好等
                </small>
            </div>
        </div>

        <!-- 功能按钮区域 -->
        <div class="row justify-content-center mt-4">
            <div class="col-lg-8">
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                    <button class="btn btn-outline-secondary" id="exportChatBtn">
                        <i class="fas fa-download me-1"></i>导出对话
                    </button>
                    <button class="btn btn-outline-secondary" id="clearChatBtn">
                        <i class="fas fa-trash me-1"></i>清空对话
                    </button>
                    <button class="btn btn-outline-secondary" id="showSettingsBtn">
                        <i class="fas fa-cog me-1"></i>设置
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 帮助模态框 -->
    <div class="modal fade" id="helpModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-question-circle text-primary me-2"></i>
                        使用帮助
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>🎯 主要功能</h6>
                    <ul>
                        <li><strong>纯英语对话</strong> - AI只使用英语回复，帮助提升英语水平</li>
                        <li><strong>内容过滤</strong> - 自动过滤不当内容，确保对话积极正面</li>
                        <li><strong>中文翻译</strong> - 自动将AI回复翻译成中文，便于理解</li>
                        <li><strong>对话历史</strong> - 自动保存对话记录</li>
                    </ul>
                    
                    <h6>💡 建议话题</h6>
                    <ul>
                        <li>🎓 <strong>英语学习</strong>：语法、词汇、发音等</li>
                        <li>🌱 <strong>个人发展</strong>：目标设定、时间管理、技能提升</li>
                        <li>💭 <strong>积极思考</strong>：正面心态、压力管理、自我激励</li>
                        <li>🏫 <strong>教育文化</strong>：学习方法、文化差异、知识分享</li>
                        <li>🎨 <strong>兴趣爱好</strong>：音乐、电影、阅读、运动等</li>
                        <li>✈️ <strong>旅行探索</strong>：目的地介绍、文化体验、旅行建议</li>
                        <li>🔬 <strong>科学技术</strong>：最新科技、科学发现、技术趋势</li>
                        <li>💪 <strong>健康生活</strong>：健身、营养、心理健康、生活习惯</li>
                        <li>🚀 <strong>励志激励</strong>：成功故事、人生哲理、积极能量</li>
                    </ul>
                    
                    <h6>🚫 禁止内容</h6>
                    <p class="text-danger">黄赌毒等违法内容将被自动过滤，AI会引导您讨论积极正面的话题。</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 统计模态框 -->
    <div class="modal fade" id="statsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-chart-bar text-primary me-2"></i>
                        对话统计
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="statsContent">
                        <p class="text-center">加载统计信息中...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 设置模态框 -->
    <div class="modal fade" id="settingsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-cog text-primary me-2"></i>
                        设置
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">显示英文回复</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="showEnglish" checked>
                            <label class="form-check-label" for="showEnglish">显示AI的英文回复</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">显示中文翻译</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="showChinese" checked>
                            <label class="form-check-label" for="showChinese">显示中文翻译</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">自动保存对话</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="autoSave" checked>
                            <label class="form-check-label" for="autoSave">自动保存对话历史</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" id="saveSettingsBtn">保存设置</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 主要应用逻辑（带缓存破除） -->
    <script src="js/app.js?v=2025-08-13-02"></script>
</body>
</html>
